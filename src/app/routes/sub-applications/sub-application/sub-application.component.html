<form [formGroup]="form" (ngSubmit)="onSubmit()">
  <div class="flex flex-col gap-4">
    <div>New Application</div>
    <div>
      <label for="name" class="block text-sm/6 font-medium text-gray-900">Name</label>
      <div class="mt-2">
        <input formControlName="name" class="input" placeholder="enter name..." />
      </div>
    </div>
    <div>
      <label for="pipelineUrl" class="block text-sm/6 font-medium text-gray-900">Pipeline Url</label>
      <div class="mt-2">
        <input formControlName="pipelineUrl" class="input" placeholder="enter pipeline url..." />
      </div>
    </div>
    <div>
      <label for="serverFolderPath" class="block text-sm/6 font-medium text-gray-900">Server Folder Path</label>
      <div class="mt-2">
        <input formControlName="serverFolderPath" class="input" placeholder="enter server folder path..." />
      </div>
    </div>
    <div>
      <label for="healthCheckUrl" class="block text-sm/6 font-medium text-gray-900">Health Check Url</label>
      <div class="mt-2">
        <input formControlName="healthCheckUrl" class="input" placeholder="enter health check url..." />
      </div>
    </div>
    <div>
      @if (applications.length == 0) {
        <div>No applications found, please <a class="text-secondary" [href]="'apps'">add an application</a></div>
      } @else {
        <label for="applicationId" class="block text-sm/6 font-medium text-gray-900">application</label>
        <div class="mt-2 grid grid-cols-1">
          <select formControlName="applicationId" class="select">
            <option value="" hidden>select application...</option>
            @for (application of applications; track application) {
              <option [ngValue]="application.id">{{ application.name }}</option>
            }
          </select>
          <svg
            class="pointer-events-none col-start-1 row-start-1 mr-2 size-5 self-center justify-self-end text-gray-500 sm:size-4"
            viewBox="0 0 16 16"
            fill="currentColor"
            aria-hidden="true"
            data-slot="icon"
          >
            <path
              fill-rule="evenodd"
              d="M4.22 6.22a.75.75 0 0 1 1.06 0L8 8.94l2.72-2.72a.75.75 0 1 1 1.06 1.06l-3.25 3.25a.75.75 0 0 1-1.06 0L4.22 7.28a.75.75 0 0 1 0-1.06Z"
              clip-rule="evenodd"
            />
          </svg>
        </div>
      }
    </div>
  </div>
  <div class="mt-5 sm:mt-6 sm:grid sm:grid-flow-row-dense sm:grid-cols-2 sm:gap-3">
    <button type="submit" class="btn inline-flex w-full sm:col-start-2" [disabled]="!form.valid">
      {{ this.isEdit ? "Edit" : "Add" }}
    </button>

    <button type="button" class="mt-3 inline-flex w-full btn btn-alt sm:col-start-1 sm:mt-0" (click)="onCancel()">
      Cancel
    </button>
  </div>
</form>
