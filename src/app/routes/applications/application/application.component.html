<form [formGroup]="form" (ngSubmit)="onSubmit()">
  <div class="flex flex-col gap-4">
    <div>New Application</div>
    <div>
      <label for="name" class="block text-sm/6 font-medium text-gray-900">Name</label>
      <div class="mt-2">
        <input formControlName="name" class="input" placeholder="enter name..." />
      </div>
    </div>
    <div>
      @if (projects.length == 0) {
        <div>No projects found, please <a class="text-secondary" [href]="'projects'">add a project</a></div>
      } @else {
        <label for="ProjectId" class="block text-sm/6 font-medium text-gray-900">Project</label>
        <div class="mt-2 grid grid-cols-1">
          <select class="select" formControlName="projectId">
            <option value="" hidden>select project...</option>
            @for (project of projects; track project) {
              <option [ngValue]="project.id">{{ project.name }}</option>
            }
          </select>
          <svg
            class="pointer-events-none col-start-1 row-start-1 mr-2 size-5 self-center justify-self-end text-gray-500 sm:size-4"
            viewBox="0 0 16 16"
            fill="currentColor"
            aria-hidden="true"
            data-slot="icon"
          >
            <path
              fill-rule="evenodd"
              d="M4.22 6.22a.75.75 0 0 1 1.06 0L8 8.94l2.72-2.72a.75.75 0 1 1 1.06 1.06l-3.25 3.25a.75.75 0 0 1-1.06 0L4.22 7.28a.75.75 0 0 1 0-1.06Z"
              clip-rule="evenodd"
            />
          </svg>
        </div>
      }
    </div>
    <div>
      @if (repositories.length == 0) {
        <div>No repositories found, please <a class="text-secondary" [href]="'repos'">add a repository</a></div>
      } @else {
        <label for="RepositoryId" class="block text-sm/6 font-medium text-gray-900">Repo</label>
        <div class="mt-2 grid grid-cols-1">
          <select formControlName="repositoryId" class="select">
            <option value="" hidden>select repository...</option>
            @for (repository of repositories; track repository) {
              <option [ngValue]="repository.id">{{ repository.name }}</option>
            }
          </select>

          <svg
            class="pointer-events-none col-start-1 row-start-1 mr-2 size-5 self-center justify-self-end text-gray-500 sm:size-4"
            viewBox="0 0 16 16"
            fill="currentColor"
            aria-hidden="true"
            data-slot="icon"
          >
            <path
              fill-rule="evenodd"
              d="M4.22 6.22a.75.75 0 0 1 1.06 0L8 8.94l2.72-2.72a.75.75 0 1 1 1.06 1.06l-3.25 3.25a.75.75 0 0 1-1.06 0L4.22 7.28a.75.75 0 0 1 0-1.06Z"
              clip-rule="evenodd"
            />
          </svg>
        </div>
      }
    </div>
  </div>
  <div class="mt-5 sm:mt-6 sm:grid sm:grid-flow-row-dense sm:grid-cols-2 sm:gap-3">
    <button type="submit" class="btn inline-flex w-full sm:col-start-2" [disabled]="!form.valid">
      {{ this.isEdit ? "Edit" : "Add" }}
    </button>
    <button type="button" class="mt-3 inline-flex w-full btn btn-alt sm:col-start-1 sm:mt-0" (click)="onCancel()">
      Cancel
    </button>
  </div>
</form>
